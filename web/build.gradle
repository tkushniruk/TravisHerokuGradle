/*
 * This file was generated by the Gradle 'init' task.
 */
plugins {

    id 'war'
}

dependencies {
    
    compile project(':services')    
    compile('javax.servlet:javax.servlet-api:3.1.0')
    compile 'com.github.jsimone:webapp-runner:7.0.22'
}

apply plugin: 'java'
apply plugin: 'application'
description = 'web'
mainClassName = "com.builders.web.HelloServlet"
jar {
manifest {
attributes "Main-Class" : "$mainClassName"
}
from {
configurations.compile.collect {it.isDirectory() ? it : zipTree(it)}
}
}

task stage() {
    dependsOn clean, war
}
war.mustRunAfter clean

task copyToLib(type: Copy) {
    into "$buildDir/server"
    from(configurations.compile) {
        include "webapp-runner*"
    }
    println "$buildDir"
}

stage.dependsOn(copyToLib)
